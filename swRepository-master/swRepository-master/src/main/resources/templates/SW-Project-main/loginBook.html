<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <!-- Basic -->
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
  <!-- Site Metas -->
  <meta name="keywords" content=""/>
  <meta name="description" content=""/>
  <meta name="author" content=""/>
  <link rel="shortcut icon" href="images/favicon.png"
        th:href="@{~/images/favicon.png}"
        type="">

  <title> Italic Time - Book Table </title>

  <!-- bootstrap core css -->
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css"
        th:href="@{~/css/bootstrap.css}"
  />

  <!--owl slider stylesheet -->
  <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"/>
  <!-- nice select  -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css"
        integrity="sha512-CruCP+TD3yXzlvvijET8wV5WxxEh5H8P4cmz0RFbKK6FlZ2sYl3AEsKlLPHbniXKSrDdFewhbmBK5skbdsASbQ=="
        crossorigin="anonymous"/>
  <!-- font awesome style -->
  <link href="css/font-awesome.min.css"
        th:href="@{~/css/font-awesome.min.css}"
        rel="stylesheet"/>

  <!-- Custom styles for this template -->
  <link href="css/style.css"
        th:href="@{~/css/style.css}"
        rel="stylesheet"/>
  <!-- responsive style -->
  <link href="css/responsive.css"
        th:href="@{~/css/responsive.css}"
        rel="stylesheet"/>

  <!--<script th:inline="javascript">
      let tableNum = document.getElementById('table_id');
      let covers = document.getElementById('covers');
      let tableCovers;
      function coverError() {
          if (tableNum == 1 || tableNum == 2 || tableNum == 3) {
              tableCovers = 2;
          }else if (tableNum == 4 || tableNum ==5 || tableNum == 6) {
              tableCovers = 3;
          } else if (tableNum == 7 || tableNum == 8 || tableNum == 9) {
              tableCovers = 4;
          }
      }
      function print() {
          coverError();
          if (covers > tableCovers) {
              alert("인원 수는 " + tableCovers + "를 초과할 수 없습니다.");
          }
      }
      bbtn = document.getElementById("res_btn");
      bbtn.addEventListener("click", function() {
          print()
      });
  </script>-->
  <style>
    /* 추가코드 */
    /* 유저 리스트에서 변경 창 테이블 css */
    .mod_table_container {
      padding-top: 5px;
      padding-bottom: 10px;
      border-radius: 100%;
    }

    /* user userModify 버튼 컨테이너*/
    .mod_btn_container {
      padding-left: 125px;
    }

    /* 버튼별 padding*/
    .mod_btn_padding {
      padding-left: 15px;
    }

    /* button 사이즈 */
    .mod_btn_size {
      height: 70px;
      width: 70px;
      border-radius: 100%;
    }

    /* user modify에서 버튼 tag시 정보 출력 */
    .mod_table_info {
      display: none;
    }

    /* user modify에서 버튼 tag시 정보 출력 */
    .mod_btn:hover > .mod_table_info {
      border: 3px solid black;
      background-color: white;
      display: block;
      font-size: 12px;
      color: black;
      width: 70px;
      height: 60px;
      font-family: Arial;
      margin-left: -13px;
    }

    /*modify page 버튼 */
    .table_info {
      display: none;
    }
  </style>
</head>

<body class="sub_page" th:object="${login}">

<div class="hero_area">
  <div class="bg-box">
    <img src="images/bg.jpg" th:src="@{~/images/bg.jpg}" alt="">
  </div>
  <!-- 헤더  -->
  <header class="header_section">
    <div class="container">
      <nav class="navbar navbar-expand-lg custom_nav-container ">
        <a class="navbar-brand" href="/index" th:href="@{|/index/${login.key}|}">
            <span>
              ItalicTime
            </span>
        </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse"
                data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
          <span class=""> </span>
        </button>
        <!-- 상단 바  -->
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav  mx-auto ">
            <li class="nav-item active">
              <a class="nav-link" href="/" th:href="@{|/index/${login.key}|}">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/menu" th:href="@{|/menu/${login.key}|}">Menu</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/about" th:href="@{|/about/${login.key}|}">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/book" th:href="@{|/book/${login.key}|}">Book Table</a>
            </li>
          </ul>
          <div class="user_option">
            <a href="" class="user_link" th:href="@{|/modify/${login.key}|}">
              <i class="fa fa-user" aria-hidden="true"></i>
            </a>
            <a class="cart_link" href="#">
              <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                   xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                   viewBox="0 0 456.029 456.029" style="enable-background:new 0 0 456.029 456.029;"
                   xml:space="preserve">
                  <g>
                    <g>
                      <path d="M345.6,338.862c-29.184,0-53.248,23.552-53.248,53.248c0,29.184,23.552,53.248,53.248,53.248
                   c29.184,0,53.248-23.552,53.248-53.248C398.336,362.926,374.784,338.862,345.6,338.862z"/>
                    </g>
                  </g>
                <g>
                    <g>
                      <path d="M439.296,84.91c-1.024,0-2.56-0.512-4.096-0.512H112.64l-5.12-34.304C104.448,27.566,84.992,10.67,61.952,10.67H20.48
                   C9.216,10.67,0,19.886,0,31.15c0,11.264,9.216,20.48,20.48,20.48h41.472c2.56,0,4.608,2.048,5.12,4.608l31.744,216.064
                   c4.096,27.136,27.648,47.616,55.296,47.616h212.992c26.624,0,49.664-18.944,55.296-45.056l33.28-166.4
                   C457.728,97.71,450.56,86.958,439.296,84.91z"/>
                    </g>
                  </g>
                <g>
                    <g>
                      <path d="M215.04,389.55c-1.024-28.16-24.576-50.688-52.736-50.688c-29.696,1.536-52.224,26.112-51.2,55.296
                   c1.024,28.16,24.064,50.688,52.224,50.688h1.024C193.536,443.31,216.576,418.734,215.04,389.55z"/>
                    </g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                </svg>
            </a>
            <form class="form-inline">
              <button class="btn  my-2 my-sm-0 nav_search-btn" type="submit">
                <i class="fa fa-search" aria-hidden="true"></i>
              </button>
            </form>
            <a href="/login" th:href="@{|/logout/${login.key}|}" class="order_online">
              LogOut
            </a>
          </div>
        </div>
      </nav>
    </div>
  </header>
  <!-- 헤더 끝 -->
</div>

<!-- 예약 -->
<section class="book_section layout_padding">
  <div class="container">
    <div class="heading_container">
      <h2>
        Book Table
      </h2>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="form_container">
          <form action="" th:action="@{|/book/${login.key}|}" th:method="post" th:object="${reservation}">
            <div>
              <div style="color: red"><p>예약할 테이블 번호를 입력해주세요.</p></div>
              <select class="form-control nice-select wide" id="table_id" th:field="*{table_id}">
                <option value="1">
                  1
                </option>
                <option value="2">
                  2
                </option>
                <option value="3">
                  3
                </option>
                <option value="4">
                  4
                </option>
                <option value="5">
                  5
                </option>
                <option value="6">
                  6
                </option>
                <option value="7">
                  7
                </option>
                <option value="8">
                  8
                </option>
                <option value="9">
                  9
                </option>
              </select>
            </div>
            <div>
              <input type="text" class="form-control" placeholder="이름" th:field="*{name}"/>
            </div>
            <div>
              <input type="text" class="form-control" placeholder="전화번호" th:field="*{phoneNumber}"/>
            </div>
            <div>
              <input type="email" class="form-control" placeholder="이메일" th:field="*{email}"/>
            </div>

            <div style="color: red" th:if="${coversError}">
              <p>인원 수를 입력해주세요</p>
            </div>

            <div style="color: red" th:if="${!coversError}">
              <p th:text="${errorTable.oid} + '번 테이블은 '+ ${errorTable.covers} + '명을 초과할 수 없습니다.'">
                인원수 초과입니다.</p>
            </div>

            <div>
              <select class="form-control nice-select wide" id="covers" th:field="*{covers}">
                <option value="2">
                  2명
                </option>
                <option value="3">
                  3명
                </option>
                <option value="4">
                  4명
                </option>
              </select>
            </div>

            <div style="color: red" th:if="${!isCurrentDate}">
              <p th:text="'현재 날짜 이전에는 예약이 불가합니다.'">
                예약할 수 없는 시간입니다.</p>
            </div>
            <div>
              <input type="date" class="form-control" th:field="*{date}">
            </div>
            <div style="color: red"><p>영업시간: 12:00 ~ 22:00</p></div>
            <div style="color: red" th:if="${!isDuplicate}">
              <p th:text="${duplicateTime} + '에는 예약이 불가합니다.'"></p>
            </div>
            <div>
              <input type="time" class="form-control" value="12:00" min="12:00" max="20:00"
                     th:field="*{time}">
            </div>
            <div class="btn_box">
              <button id="res_btn" type="submit" th:href="@{|/book/${login.key}|}">
                예약하기
              </button>
            </div>
          </form>
        </div>
      </div>
      <div class="col-md-6">
        <div class="mod_btn_container">
          <div class="mod_table_container">
            <div class="btn-toolbar mb-3" role="toolbar" aria-label="Toolbar with button groups">
              <div class="btn-group mr-2" role="group" aria-label="First group">
                <div class="mod_btn_padding">
                  <button type="button" style="background-color:#3498DB"
                          class="btn btn-secondary mod_btn_size mod_btn">1
                    <div class="mod_table_info">
                      <span th:text="'인원수: ' + ${tableNum1.covers}+ ' '">인원수:3명</span>
                      <th:block th:each="book : ${arr1}">
                        <p th:text="${book.date}+': ' + ${book.time} + ' ~ ' + ${book.endTime}">111</p>
                      </th:block>
                      현재 예약 가능
                    </div>
                  </button>
                </div>
              </div>
              <div class="btn-group mr-2" role="group" aria-label="First group">
                <div class="mod_btn_padding">
                  <button type="button" style="background-color:#3498DB"
                          class="btn btn-secondary mod_btn_size mod_btn">2
                    <div class="mod_table_info">
                      <span th:text="'인원수: ' + ${tableNum2.covers}+ ' '">인원수:3명</span>
                      <th:block th:each="book : ${arr2}">
                        <span th:text="${book.time} + ' ~ ' + ${book.endTime}">111</span>
                      </th:block>
                      현재 예약 가능
                    </div>
                  </button>
                </div>
              </div>
              <div class="btn-group mr-2" role="group" aria-label="First group">
                <div class="mod_btn_padding">
                  <button type="button" style="background-color:#3498DB"
                          class="btn btn-secondary mod_btn_size mod_btn">3
                    <div class="mod_table_info"><span th:text="'인원수: ' + ${tableNum3.covers}+ ' '">인원수:3명</span>
                      <th:block th:each="book : ${arr3}">
                        <span th:text="${book.time} + ' ~ ' + ${book.endTime}">111</span>
                      </th:block>
                      현재 예약 가능
                    </div>
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="mod_table_container ">
            <div class="btn-toolbar mb-3" role="toolbar" aria-label="Toolbar with button groups">
              <div class="btn-group mr-2" role="group" aria-label="First group">
                <div class="mod_btn_padding">
                  <button type="button" style="background-color:#3498DB"
                          class="btn btn-secondary mod_btn_size mod_btn">4
                    <div class="mod_table_info"><span th:text="'인원수: ' + ${tableNum4.covers}+ ' '">인원수:3명 </span>
                      <th:block th:each="book : ${arr4}">
                        <span th:text="${book.time} + ' ~ ' + ${book.endTime}">111</span>
                      </th:block>
                      현재 예약 가능
                    </div>
                  </button>
                </div>
              </div>
              <div class="btn-group mr-2" role="group" aria-label="First group">
                <div class="mod_btn_padding">
                  <button type="button" style="background-color:#3498DB"
                          class="btn btn-secondary mod_btn_size mod_btn">5
                    <div class="mod_table_info"><span th:text="'인원수: ' + ${tableNum5.covers} + ' '">인원수:3명</span>
                      <th:block th:each="book : ${arr5}">
                        <span th:text="${book.time} + ' ~ ' + ${book.endTime}">111</span>
                      </th:block>
                      현재 예약 가능
                    </div>
                  </button>
                </div>
              </div>
              <div class="btn-group mr-2" role="group" aria-label="First group">
                <div class="mod_btn_padding">
                  <button type="button" style="background-color:#3498DB"
                          class="btn btn-secondary mod_btn_size mod_btn">6
                    <div class="mod_table_info"><span th:text="'인원수: ' + ${tableNum6.covers}+ ' '">인원수:3명</span>
                      <th:block th:each="book : ${arr6}">
                        <span th:text="${book.time} + ' ~ ' + ${book.endTime}">111</span>
                      </th:block>
                      현재 예약 가능
                    </div>
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="mod_table_container ">
            <div class="btn-toolbar mb-3" role="toolbar" aria-label="Toolbar with button groups">
              <div class="btn-group mr-2" role="group" aria-label="First group">
                <div class="mod_btn_padding">
                  <button type="button" style="background-color:#3498DB"
                          class="btn btn-secondary mod_btn_size mod_btn">7
                    <div class="mod_table_info"><span th:text="'인원수: ' + ${tableNum7.covers}+ ' '">인원수:3명</span>
                      <th:block th:each="book : ${arr7}">
                        <span th:text="${book.time} + ' ~ ' + ${book.endTime}">111</span>
                      </th:block>
                      현재 예약 가능
                    </div>
                  </button>
                </div>
              </div>
              <div class="btn-group mr-2" role="group" aria-label="First group">
                <div class="mod_btn_padding">
                  <button type="button" style="background-color:#3498DB"
                          class="btn btn-secondary mod_btn_size mod_btn">8
                    <div class="mod_table_info"><span th:text="'인원수: ' + ${tableNum8.covers}+ ' '">인원수:3명</span>
                      <th:block th:each="book : ${arr8}">
                        <span th:text="${book.time} + ' ~ ' + ${book.endTime}">111</span>
                      </th:block>
                      현재 예약 가능
                    </div>
                  </button>
                </div>
              </div>
              <div class="btn-group mr-2" role="group" aria-label="First group">
                <div class="mod_btn_padding">
                  <button type="button" style="background-color:#3498DB"
                          class="btn btn-secondary mod_btn_size mod_btn">9
                    <div class="mod_table_info"><span th:text="'인원수: ' + ${tableNum9.covers}+ ' '">인원수:3명 </span>
                      <th:block th:each="book : ${arr9}">
                        <span th:text="${book.time} + ' ~ ' + ${book.endTime}">111</span>
                      </th:block>
                      현재 예약 가능
                    </div>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- 예약 끝 -->

<!-- 하단 -->
<footer class="footer_section">
  <div class="container">
    <div class="row">
      <div class="col-md-4 footer-col">
        <div class="footer_contact">
          <h4>
            Contact
          </h4>
          <div class="contact_link_box">
            <a href="">
              <i class="fa fa-map-marker" aria-hidden="true"></i>
              <span>
                  Kyonggi University
                </span>
            </a>
            <a href="">
              <i class="fa fa-phone" aria-hidden="true"></i>
              <span>
                  02-1234-5678
                </span>
            </a>
            <a href="">
              <i class="fa fa-envelope" aria-hidden="true"></i>
              <span>
                  EworldTension@kyonggi.ac.kr
                </span>
            </a>
          </div>
        </div>
      </div>
      <div class="col-md-4 footer-col">
        <div class="footer_detail">
          <a href="" class="footer-logo">
            ItalicTime
          </a>
          <p>
            육류, 생선류등 메인요리와 스튜, 피자 그리고 다양한 와인들을 즐길 수 있습니다.
          </p>
          <div class="footer_social">
            <a href="">
              <i class="fa fa-facebook" aria-hidden="true"></i>
            </a>
            <a href="">
              <i class="fa fa-twitter" aria-hidden="true"></i>
            </a>
            <a href="">
              <i class="fa fa-instagram" aria-hidden="true"></i>
            </a>
          </div>
        </div>
      </div>
      <div class="col-md-4 footer-col">
        <h4>
          Opening Hours
        </h4>
        <p>
          가게 운영시간
        </p>
        <p>
          11:00 Am - 09:00 Pm
        </p>
      </div>
    </div>
    <div class="footer-info">
      <p>
        &copy; <span id="displayYear"></span>
        <a href="https://html.design/">Restaurant Reservation Page System</a><br><br>
        &copy; <span id="displayYear"></span> Distributed By
        <a href="https://themewagon.com/" target="_blank">Team E</a>
      </p>
    </div>
  </div>
</footer>
<!-- 하단 끝 -->

<!-- jQery -->
<script src="js/jquery-3.4.1.min.js" th:src="@{~/js/jquery-3.4.1.min.js}"></script>
<!-- popper js -->
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
</script>
<!-- bootstrap js -->
<script src="js/bootstrap.js" th:src="@{~/js/bootstrap.js}"></script>
<!-- owl slider -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js">
</script>
<!-- isotope js -->
<script src="https://unpkg.com/isotope-layout@3.0.4/dist/isotope.pkgd.min.js"></script>
<!-- nice select -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js"></script>
<!-- custom js -->
<script src="js/custom.js" th:src="@{~/js/custom.js}"></script>
<!-- Google Map -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCh39n5U-4IoWpsVGUHWdqB6puEkhRLdmI&callback=myMap">
</script>
<!-- End Google Map -->

</body>

</html>